!function(d){d.fn.jqm=function(n){var o=d.extend({},d.jqm.params,n);return this.each(function(){var n=d(this),t=d(this).data("jqm");t||(t={ID:u++}),n.data("jqm",d.extend(o,t)).addClass("jqm-init"),o.trigger&&d(this).jqmAddTrigger(o.trigger)})},d.fn.jqmAddTrigger=function(n){return this.each(function(){i(d(this),"jqmShow",n)||t("jqmAddTrigger must be called on initialized modals")})},d.fn.jqmAddClose=function(n){return this.each(function(){i(d(this),"jqmHide",n)||t("jqmAddClose must be called on initialized modals")})},d.fn.jqmShow=function(n){return this.each(function(){this._jqmShown||o(d(this),n)})},d.fn.jqmHide=function(n){return this.each(function(){this._jqmShown&&e(d(this),n)})};var t=function(n){window.console&&window.console.error&&window.console.error(n)},o=function(n,t){var o=n.data("jqm"),e=(t=t||window.event,0<(e=parseInt(n.css("z-index")))?e:3e3),i=d("<div></div>").addClass(o.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":e-1,opacity:o.overlay/100}),a={w:n,c:o,o:i,t:t};if(n.css("z-index",e),o.ajax){var r=o.target||n,s=o.ajax;r="string"==typeof r?d(r,n):d(r),"@"==s.substr(0,1)&&(s=d(t).attr(s.substring(1))),r.html(o.ajaxText).load(s,function(){o.onLoad&&o.onLoad.call(this,a),c(a)})}else c(a)},e=function(n,t){var o=n.data("jqm"),e=(t=t||window.event,{w:n,c:o,o:n.data("jqmv"),t:t});a(e)},i=function(n,e,t){return!!n.data("jqm")&&d(t).each(function(){this[e]=this[e]||[],this[e].push(n)}).click(function(){var o=this;return d.each(this[e],function(n,t){t[e](o)}),!1})},c=function(n){var t=n.w,o=n.o,e=n.c;!1!==e.onShow(n)&&(t[0]._jqmShown=!0,e.modal?(m[0]||r("bind"),m.push(t)):t.jqmAddClose(o),e.closeClass&&t.jqmAddClose(d("."+e.closeClass,t)),e.toTop&&o&&t.before('<span id="jqmP'+e.ID+'"></span>').insertAfter(o),t.data("jqmv",o))},a=function(n){var t=n.w,o=n.o,e=n.c;!1!==e.onHide(n)&&(t[0]._jqmShown=!1,e.modal&&(m.pop(),m[0]||r("unbind")),e.toTop&&o&&d("#jqmP"+e.ID).after(t).remove())},r=function(n){d(document)[n]("keypress keydown mousedown",s)},s=function(n){var t=d(n.target).data("jqm")||d(n.target).parents(".jqm-init:first").data("jqm"),o=m[m.length-1].data("jqm");return!(!t||t.ID!=o.ID)||d.jqm.focusFunc(o)},u=0,m=[];d.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,target:!1,ajaxText:"",modal:!1,toTop:!1,onShow:function(n){return!n.w[0]._jqmShown&&(0<n.c.overlay&&n.o.prependTo("#popup_iframe_wrapper"),n.w.show(),d.jqm.focusFunc(n.w),!0)},onHide:function(n){return n.w.hide()&&n.o&&n.o.remove(),!0},onLoad:!1},focusFunc:function(n){return d(":input:visible:first",n).focus(),!1}}}(jQuery);